express 原理

执行get或者use方法时,声明一个layer并进行入栈,区别在于使用中间件没有route属性.

路由的话,分为两层,第一层是layer,layer是路径,加第二层layer,第二层layer是方法和对应的真正的回调,


执行顺序类似二层for循环,但是for循环是同步的,中间件和路由是异步的,要等一个执行完执行下一个,所以采用迭代递归串行执行.